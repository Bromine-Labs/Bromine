---
import "@/styles.css";
import Lethal from "@/components/utils/Lethal.astro";

export interface Props {
  title?: string;
  desc?: string;
}

const {
  title = "bromine",
  desc = "Bromine is the ultimate spot where elements meet creativity, making even the toughest equations feel like a breeze. From element matching to chemical reactions, this site turns everyday chemistry into something easy.",
} = Astro.props;
---

<html lang="en" data-theme="">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <meta name="description" content={desc} />
    <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#191724" />
    <meta name="version" content="2.0.0" />

    <!-- SEO -->
    <meta property="og:site_name" content="Bromine" />
    <meta property="og:title" content={title} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bromine.calculra.store/" />
    <meta property="og:description" content={desc} />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Bromine" />
    <meta name="twitter:description" content="Bromine is a minimal and clean secure web pr0xy service..." />

    <!-- Favicon -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

    <link rel="preconnect" href="https://images.placeholders.dev" />
    <Lethal />

    <title>{title}</title>


    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NQ3WX8KNQW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){{dataLayer.push(arguments);}}
      gtag('js', new Date());
      gtag('config', 'G-NQ3WX8KNQW');
    </script>


    <!-- Scripts -->
    <script>
      const originalSetItem = localStorage.setItem;
      localStorage.setItem = function(key) {
        originalSetItem.apply(this, arguments);
        window.dispatchEvent(new Event(`${key}-changed`));

        window.parent.postMessage({
          type: `${key}-changed`
        }, "*");
        currentFrame.contentWindow.postMessage({
          type: `${key}-changed`
        }, "*");
		  };

      const applyTheme = () => {
        const theme = localStorage.getItem("theme");
        document.body.dataset.theme = theme;
      };

      const applyCloak = () => {
        const cloak = localStorage.getItem("cloak");
        if (!cloak || cloak === "none") return;
        const [newTitle, newIcon] = cloak.split("|");
        document.title = newTitle;
        const favicon = document.querySelector("link[rel=icon]");
        if (favicon) favicon.href = newIcon;
      };

      window.addEventListener("theme-changed", applyTheme);
      window.addEventListener("cloak-changed", applyCloak);
      document.addEventListener("DOMContentLoaded", () => {
        applyTheme();
        applyCloak();
      });
    </script>
  </head>

  <body class="flex flex-col min-h-screen bg-bg">
    <a
      href="#main"
      class="absolute left-4 top-4 z-50 bg-surface px-4 py-2 rounded-md shadow-lg
             transform -translate-y-16 opacity-0 transition-all duration-300 ease-in-out
             focus:translate-y-0 focus:opacity-100 hover:bg-overlay"
    >
      Skip to main content
    </a>

    <main id="main" class="flex flex-col flex-grow">
      <slot />
    </main>
  </body>
</html>

